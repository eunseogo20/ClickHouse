---
toc_priority : 7
toc_title : "\ u6B74 \ u53F2"
---

# ClickHouse의 역사 {# clickhousenoli-shi}

ClickHouse은 원래, 세계에서 2 번째로 큰 Web 분석 플랫폼 (http://w3techs.com/technologies/overview/traffic_analysis/all)이다 [Yandex.Metrica (https://metrica.yandex.com/ )을 강화하기 위해 개발 된 것으로,이 시스템의 핵심 구성 요소로 계속 있습니다. 데이터베이스에는 13 조를 넘는 레코드가 매일 200 억 이상의 이벤트가 발생하지만 ClickHouse는 집계되지 않은 데이터에서 직접 사용자 정의 보고서를 생성 할 수 있습니다. 이 문서에서는 ClickHouse 개발의 초기 단계에서 ClickHouse의 목표에 대해 간략하게 설명합니다.

Yandex.Metrica는 사용자가 정의한 모든 세그먼트를 사용하여 히트와 세션에 따라 사용자 정의 된 보고서를 매번 작성합니다. 여기에는 종종 고유 사용자 수와 같은 복잡한 집계를 작성해야 보고서를 작성하기위한 새로운 데이터를 실시간으로 수신됩니다.

2014 년 4 월 시점에서 Yandex.Metrica은 매일 약 120 억의 이벤트 (페이지 뷰와 클릭)을 추적하고있었습니다. 사용자 지정 보고서를 만들려면 이러한 모든 이벤트를 저장해야합니다. 단일 쿼리에서 수백 밀리 초 이내에 수백만 개의 행을 검사하고, 몇 초에서 몇 억 줄을 스캔해야합니다.

## Yandex.Metrica 및 기타 Yandex 서비스의 용도 {# yandex-metricaoyobisonota-noyandexsabisudenoyong-tu}

ClickHouse는 Yandex.Metrica에서 여러 용도로 사용됩니다. 그 주된 임무는 집계되지 않은 데이터를 사용하여 온라인으로 보고서를 작성하는 것입니다. 374 대의 서버로 구성된 클러스터를 사용하여 20.3 조 행을 데이터베이스에 저장합니다. 압축 된 데이터의 양 중복 데이터 및 복제를 제외하고 약 2PB입니다. 비 압축 데이터 (TSV 형식)의 양은 약 17PB도됩니다.

ClickHouse는 다음 용도로 사용됩니다.

- Yandex.Metrica의 데이터를 세션 재생을 위해 저장한다.
- 중간 데이터를 처리한다.
- Analytics를 사용하여 글로벌 보고서 작성.
- Yandex.Metrica 엔진을 디버깅하는 쿼리를 실행합니다.
- API 및 사용자 인터페이스에서 로그 분석.

ClickHouse 적어도 다른 12 Yandex 서비스 (검색 분야 Market, Direct, 비즈니스 분석, 모바일 개발, AdFox, 개인 서비스 등)에서 사용할 수 있습니다.

## 집약 된 데이터와 비 집계 데이터 {# ji-yue-saretadetatofei-ji-yue-deta}

통계를 효과적으로 계산하려면 데이터의 양을 줄이기 위해 데이터를 집계 할 필요가 있다는 일반적인 의견이 있습니다.

그러나 다음과 같은 이유로 데이터 통합은 매우 제한된 솔루션입니다.

- 사용자가 필요로하는 보고서 미리 정의 목록이 필요합니다.
- 사용자는 사용자 정의 보고서를 작성할 수 없습니다.
- 대량의 키를 집약하는 경우 데이터 량은 감소되지 않고 집약 도움이되지 않습니다.
- 다수의 보고서에 집계 변형이 너무 많습니다 (조합 폭발)
- 중요도가 높은 키 (URL)를 통합하는 경우 데이터의 양은 그다지 감소하지 않습니다 (고작 절반 정도).
- 따라서 집계 된 데이터의 양이 감소 하기는 커녕 증가 할 수 있습니다.
- 생성 한 모든 보고서를 사용자가 볼 것은 없습니다. 계산의 대부분은 낭비되고 있습니다.
- 데이터의 논리적 일관성은 다양한 집계에 위반 될 수 있습니다.

아무것도 집계하지 않고 집계되지 않은 데이터를 조작 할 경우 실제로는 계산량이 줄어들 수 있습니다.

그러나 집계는 그 대부분이 오프라인에서 실행되는 비교적 느긋하게 처리합니다. 대조적으로, 온라인 계산은 사용자가 결과를 기다리고 있기 때문에 가능한 한 빨리 계산해야합니다.

Yandex.Metrica에는 Metrage라는 데이터를 집계하기위한 특별한 시스템이 있으며, 이는 대부분의 보고서에서 사용되고 있습니다. 2009 년 이후 Yandex.Metrica는 이전에 보고서 작성기에서 사용 된 OLAPServer라는 집계되지 않은 데이터에 대한 특별한 OLAP 데이터베이스를 사용했습니다. OLAPServer는 집계되지 않은 데이터에 대해서는 잘 작동했지만 많은 제한이있어, 필요에 따라 모든 보고서에 사용할 수 없습니다. 제한은 (숫자 만 밖에 취급 할 수없는) 데이터 형식 지원의 부족과 실시간으로 데이터를 단계적으로 업데이트 할 수 없음 (매일 데이터를 다시 작성하여 만 업데이트 가능)이있었습니다. OLAPServer는 DBMS가 아닌 특수한 DB이었습니다.

OLAPServer의 한계를 극복 보고서에 집계되지 않은 데이터를 처리 문제를 해결하기 위해, 우리는 ClickHouse DBMS를 개발했습니다.

[Original article (https://clickhouse.tech/docs/en/introduction/history/) <! - hide ->
